function update()
lock();
_update();
unlock();